{yun:}include file="$userstyle/header.htm"{/yun} 
{yun:}include file="$tplstyle/public_search/index_search.htm"{/yun}
<link rel="stylesheet" href="{yun:}$style{/yun}/style/newclass.public.css?v={yun:}$config.cachecode{/yun}" type="text/css"/>
<script type="text/javascript">
	function addWork(){
		$("#addwork").append(function(){
			var randnum='w'+parseInt(Math.random()*1000); 
			var html="";

			html+="<div class='news_expect_n_box' id='"+randnum+"'><div class='news_expect_list news_expect_listtj'>";
			html+="		<span class='news_expect_list_span'><i class='news_expectfont'>*</i>公司名称：</span>";	
			html+="		<div class='news_expect_list_rbox'><input type='text' value='' name='workname[]' id='workname"+randnum+"' class='news_expect_text_t1' onBlur=\"checkonblur('workname"+randnum+"','rand');\" placeholder='请填写公司名称'/><span class='news_expect_name'></span><div class='resume_tip'><span class='none' id='hidworkname"+randnum+"'></span></div></div><i class='yun_resume_popup_del showedunum news_expect_listqx' id='"+randnum+"' onclick=\"deletebox('"+randnum+"')\">删除</i></div>";
			html+="		<div class='news_expect_list news_expect_w1000'><span class='news_expect_list_span'><i class='news_expectfont'>*</i>担任职位：</span><div class='news_expect_list_rbox'><input type='text' value='' name='worktitle[]' id='worktitle"+randnum+"' class='news_expect_text_t1' onBlur=\"checkonblur('worktitle"+randnum+"','rand');\" placeholder='请填写担任职位'/><span class='news_expect_name'></span><div class='resume_tip'><span class='none' id='hidworktitle"+randnum+"'></span></div></div></div>";					
			html+="		<div class='news_expect_list news_expect_listw100'><span class='news_expect_list_span'><i class='news_expectfont'>*</i>在职时间：</span><div class='news_expect_list_rbox'><input name='worksdate[]' id='worksdate"+randnum+"' type='text' onfocus=\"showblurmsg('worksdate"+randnum+"',1,'')\" value=''placeholder='请选择入职时间'  class='news_expectadd_text' style='width:105px'><span class='news_expect_text_xzline'>-</span><input name='workedate[]' id='workedate"+randnum+"' type='text' value=''placeholder='请选择离职时间' onfocus=\"showblurmsg('workedate"+randnum+"',1,'')\"    class='news_expectadd_text' style='width:105px'><div class='news_expect_listtody'><input type='checkbox' value='1' id='stopdate"+randnum+"' data-random='"+randnum+"' name='stopdate[]' lay-filter='stopdate' title='至今' lay-skin='primary'><input type='hidden' id='totoday"+randnum+"' name='totoday[]' value='0' /></div><script>layui.use(['laydate'], function(){var laydate = layui.laydate;monthclick(laydate,'#worksdate"+randnum+"');monthclick(laydate,'#workedate"+randnum+"');});<\/script><span class='news_expect_name'></span><div class='resume_tip'><span class='none' id='hidworksdate"+randnum+"'></span></div></div></div>"	;
			html+="		<div class='news_expect_textarea'><span class='news_expect_list_span'>工作内容：</span><div class='news_expect_list_rbox'><div class='news_expect_textarea_box'><textarea rows='5' cols='50' name='workcontent[]' id='workcontent"+randnum+"' class='news_expect_n_boxtextarea 'placeholder='请简述一下岗位职责和工作业绩，让用人单位对更多了解你！'></textarea></div><span class='news_expect_name'></span><div class='resume_tip'><span class='none' id='hidworkcontent"+randnum+"'></span></div></div></div></div>";						
			return html;
	    });
	    layui.use(['form'], function(){
	      layui.form.render();
	    });
	}
	function addEdu(){
		$("#addedu").append(function(){
			 var randnum='e'+parseInt(Math.random()*1000); 
			 var html="";
			 html	+="<div id='"+randnum+"' class='news_expect_n_box'><div class='news_expect_list'><span class='news_expect_list_span'><i class='news_expectfont'>*</i>学校名称：</span><div class='news_expect_list_rbox'><input type='text' value='' name='eduname[]' id='eduname"+randnum+"' class='news_expect_text_t1' onBlur=\"checkonblur('eduname"+randnum+"','rand');\" placeholder='请填写学校名称'/><span class='news_expect_name'></span><div class='resume_tip'><span class='none' id='hideduname"+randnum+"'></span></div></div><i class='yun_resume_popup_del showedunum news_expect_listqx' id='"+randnum+"' onclick=\"deletebox('"+randnum+"')\">删除</i></div>";

			 html	+="<div class='news_expect_list news_expect_w1000'><span class='news_expect_list_span'><i class='news_expectfont'>*</i>在校时间：</span><div class='news_expect_list_rbox'><input name='edusdate[]' id='edusdate"+randnum+"' type='text' value='' onfocus=\"showblurmsg('edusdate"+randnum+"',1,'')\" class='news_expectadd_text'placeholder='请选择入校时间' /><span class='news_expect_text_xzline'>-</span><input name='eduedate[]' id='eduedate"+randnum+"' onfocus=\"showblurmsg('eduedate"+randnum+"',1,'')\" type='text' value=''placeholder='请选择毕业时间' class='news_expectadd_text' /><span class='news_expect_name'></span><div class='resume_tip resume_tipw160'><span class='none' id='hidedusdate"+randnum+"'></span></div></div></div><script>layui.use(['laydate'], function(){var laydate = layui.laydate;monthclick(laydate,'#edusdate"+randnum+"');monthclick(laydate,'#eduedate"+randnum+"');});<\/script>";

			 html	+="<div class='news_expect_list'><span class='news_expect_list_span'><i class='news_expectfont'>*</i>最高学历：</span><div class='news_expect_text_big'><div class='layui-form-item'><div class='layui-input-inline' style='width:330px;'><select name='education[]' lay-filter='' id='education"+randnum+"'><option value=''>请选择学历</option>{yun:}foreach from=$userdata.user_edu key=j item=v{/yun}<option value='{yun:}$v{/yun}'>{yun:}$userclass_name[$v]{/yun}</option>{yun:}/foreach{/yun}</select></div></div><div class='resume_tip'><span class='none' id='hideducation"+randnum+"'></span></div></div></div>";
			 html	+="<div class='news_expect_list news_expect_w1000'><span class='news_expect_list_span'>所学专业：</span><div class='news_expect_list_rbox'><input type='text' value='' name='eduspec[]' id='eduspec"+randnum+"' class='news_expect_text_t1' onBlur=\"checkonblur('eduspec"+randnum+"','rand');\" placeholder='请填写所学专业'/><span class='news_expect_name'></span><div class='resume_tip'><span class='none' id='hideduspec"+randnum+"'></span></div></div>	</div></div>";
					
			 return html;
	    });

	    layui.use(['form'], function(){
	      layui.form.render();
	    });
	}
	function addProject(){
		$("#addproject").append(function(){
			var randnum='e'+parseInt(Math.random()*1000); 
			var html="";

			html	+="<div id='"+randnum+"' class='news_expect_n_box'><div class='news_expect_list'><span class='news_expect_list_span'><i class='news_expectfont'>*</i>项目名称：</span><div class='news_expect_list_rbox'><input type='text' value='' name='proname[]' id='proname"+randnum+"'placeholder='请填写项目名称'  class='news_expect_text_t1' onBlur=\"checkonblur('proname"+randnum+"','rand');\" /><span class='news_expect_name'></span><div class='resume_tip'><span class='none' id='hidproname"+randnum+"'></span></div></div><i class='yun_resume_popup_del showedunum news_expect_listqx' id='"+randnum+"' onclick=\"deletebox('"+randnum+"')\">删除</i></div>";
			html	+="<div class='news_expect_list news_expect_w1000'><span class='news_expect_list_span'><i class='news_expectfont'>*</i>担任职位：</span><div class='news_expect_list_rbox'><input type='text' value='' name='protitle[]' id='protitle"+randnum+"'placeholder='请填写担任职位'  class='news_expect_text_t1' onBlur=\"checkonblur('protitle"+randnum+"','rand');\" /><span class='news_expect_name'></span><div class='resume_tip'><span class='none' id='hidprotitle"+randnum+"'></span></div></div></div>";

			html	+="<div class='news_expect_list'><span class='news_expect_list_span'><i class='news_expectfont'>*</i>项目时间：</span><div class='news_expect_list_rbox'><input name='prosdate[]' id='prosdate"+randnum+"' type='text' value='' onfocus=\"showblurmsg('prosdate"+randnum+"',1,'')\" placeholder='请选择项目开始时间' class='news_expectadd_text' /><span class='news_expect_text_xzline'>-</span><input name='proedate[]' id='proedate"+randnum+"' type='text' value=''  onfocus=\"showblurmsg('eduedate"+randnum+"',1,'')\" placeholder='请选择项目结束时间'  class='news_expectadd_text' /><span class='news_expect_name'></span><div class='resume_tip resume_tipw140'><span class='none' id='hidprosdate"+randnum+"'></span></div></div><script>layui.use(['laydate'], function(){var laydate = layui.laydate;monthclick(laydate,'#prosdate"+randnum+"');monthclick(laydate,'#proedate"+randnum+"');});<\/script></div>";

			html	+="<div class='news_expect_textarea'><span class='news_expect_list_span'>项目内容：</span><div class='news_expect_list_rbox'><div class='news_expect_textarea_box'><textarea rows='5' cols='50' name='procontent[]' id='procontent"+randnum+"' class='news_expect_n_boxtextarea'></textarea></div><span class='news_expect_name'></span><div class='resume_tip'><span class='none' id='hidprocontent"+randnum+"'></span></div></div></div></div>"

			 return html;
	    });

	    layui.use(['form'], function(){
	      layui.form.render();
	    });
	}
	function deletebox(id,type){
		$("#"+id).remove();
	}
</script>
<form action="index.php?c=expect&act=addsave" id="resumeForm" name="MyForm" method="post" target="expectiframe" onsubmit="return checkexpect();" autocomplete="off" class="layui-form">
	<div class="news_expect_body">
		<div class="news_expect">
		
				<div class="news_expect_cont_h1">
					<div class="news_expect_cont_h1_box">
						<span class="news_expect_cont_h1_s">您正在创建简历</span>
						<div class="news_expect_cont_h1_p">简历是求职第一步，优质的简历才能更快找到满意工作！</div>
					</div>
				

                {yun:}if $config.resume_create_exp=='1'||$config.resume_create_edu=='1'||$config.resume_create_project=='1'{/yun}
				<div class="fill_in_process" style="width:710px;">
                  <span class="fill_add_color"><i>1</i>求职意向<em>……</em></span>
                  {yun:}if $config.resume_create_exp=='1'{/yun}<span id="worktype"><i>2</i>工作经历<em>……</em></span>{yun:}/if{/yun}
                  {yun:}if $config.resume_create_edu=='1'{/yun}<span id="edutype"><i>{yun:}if $config.resume_create_exp=='1'{/yun}3{yun:}else{/yun}2{yun:}/if{/yun}</i>教育经历<em>……</em></span>{yun:}/if{/yun}
                  {yun:}if $config.resume_create_project=='1'{/yun}<span id="projecttype"><i>{yun:}if $config.resume_create_exp=='1'&&$config.resume_create_edu=='1'{/yun}4{yun:}elseif $config.resume_create_exp=='1'||$config.resume_create_edu=='1'{/yun}3{yun:}else{/yun}2{yun:}/if{/yun}</i>项目经历<em>……</em></span>{yun:}/if{/yun}
                  <span><i class="fill_add_color_cg"></i>填写成功</span> 
                </div>
				{yun:}/if{/yun}</div>
					<div class="news_expect_cont"><div class="news_expect_content" id="expect" style="display: block">
          
            					<div class="news_expect_tit"><span class="news_expect_tit_s"><i class="news_expect_tit_yx_icon"></i>求职意向</span></div>

					<div class="news_expect_n_box">
                     <div class="news_expect_new_left">
						<div class="news_expect_list">
							<span class="news_expect_list_span"><i class="news_expectfont">*</i>期望职位：</span>
							<div class="news_expect_list_rbox">
                            <input type="text" value="" name="name" id="name" class="news_expect_text_t1" onBlur="checkonblur('name');" placeholder="具体岗位 如：销售主管" />
							<span class="resume_tip" style="position:absolute;left: 340px;top: 10px;width: 150px;"><span class="none" id="hidname"></span></span>
                            </div>
						</div>
        
						<div class="news_expect_list">
							<span class="news_expect_list_span "><i class="news_expectfont">*</i>工作职能：</span>
							<div class="news_expect_text_new  news_expect_text_re20" style="width:330px;">
								<input name='job_class' id='job_class' value="{yun:}$resume.job_classid{/yun}" type='hidden'/>
								<select id="jobclass_search" name="jobclass_search" xm-select-type="jobclass" xm-select="jobclass_search" xm-select-search="" xm-select-max="5" xm-select-skin="default"  xm-select-direction="down">
								<option value="">输入搜索，最多选5项</option>
								</select>
								{yun:}if $jionly!='1'{/yun}
								<div onclick="index_job_new(5,'#workadds_job','#job_class','left:100px;top:100px; position:absolute;','1');" class="news_expect_text_new_nth" title="选择职位类别"></div>
								{yun:}/if{/yun}
								<div class="resume_tip" style="position:absolute;left: 340px;top: 10px;width: 150px;"><span class="none" id="hidjob_class"></span></div>
							</div>
						</div>
						
						<div class="news_expect_list">
							<span class="news_expect_list_span "><i class="news_expectfont">*</i>期望城市：</span>
							<div class="news_expect_text_new  news_expect_text_re10" style="width:330px;">
								<input name='city_class' id='city_class' value="" type='hidden' />
								<select id="cityclass_search" name="cityclass_search" xm-select-type="cityclass" xm-select="cityclass_search" xm-select-search="" xm-select-max="5" xm-select-skin="default"  xm-select-direction="down">
								<option value="">输入搜索，最多选5项</option>
								</select>
								{yun:}if $cionly!='1'{/yun}
								<div onclick="index_city_new(5,'#cityadds_job','#city_class','left:100px;top:100px; position:absolute;')" class="news_expect_text_new_nth" title="选择城市"></div>
								{yun:}/if{/yun}
								<div class="resume_tip" style="position:absolute;left: 340px;top: 10px;width: 150px;"><span class="none" id="hidcity_class"></span></div>
							</div>
						</div>
					
				

						<div class="news_expect_list">
							<span class="news_expect_list_span"><i class="news_expectfont">*</i>到岗时间：</span>
							<div class="news_expect_text_big  ">
								<div class="layui-form-item">
									<div class="layui-input-inline" style="width:330px;">
										<select name="report" lay-filter="" id="reportid">
											{yun:}foreach from=$userdata.user_report key=j item=v{/yun}
											<option value="{yun:}$v{/yun}" {yun:}if $resume.report==$v{/yun}selected="selected" {yun:}/if{/yun}>{yun:}$userclass_name[$v]{/yun}</option>
											{yun:}/foreach{/yun}
										</select>
									</div>
								</div>
							
							<div class="resume_tip" style="position:absolute;left: 340px;top: 10px;width: 150px;"><span class="none" id="hidreportid"></span></div>
						</div>
</div>
				</div>
                <div class="news_expect_new_right">
              			
						<div class="news_expect_list">
							<span class="news_expect_list_span news_expect_list_spanw160"><i class="news_expectfont">*</i>期望薪资：</span>
                            <div class="news_expect_list_rbox">
							<div class="news_expect_xztext_box">
								<input type="text" id="minsalary" name="minsalary" size="5" value="{yun:}$resume.minsalary{/yun}" onkeyup="checkmoney(this)" class="news_expect_xztext " onBlur="checkonblur('minsalary');" placeholder="最低薪资" />
								<span class="job_expectxz_dw">元/月</span>
							</div>
							<span class="news_expect_text_xzline">-</span>
							<div class="news_expect_xztext_box">
								<input type="text" id="maxsalary" name="maxsalary" size="5" placeholder="最高薪资" value="{yun:}$resume.maxsalary{/yun}" onkeyup="checkmoney(this)" class="news_expect_xztext" />
								<span class="job_expectxz_dw">元/月</span>
							</div>
							<div class="resume_tip"><span class="none" id="hidminsalary"></span></div>
						</div></div><div class="news_expect_list">
							<span class="news_expect_list_span news_expect_list_spanw160"><i class="news_expectfont">*</i>工作性质：</span>
							<div class="news_expect_text_big  news_expect_text_re6">
								<div class="layui-form-item">
									<div class="layui-input-inline" style="width:330px;">
										<select name="type" lay-filter="" id="typeid">
											{yun:}foreach from=$userdata.user_type key=j item=v{/yun}
											<option value="{yun:}$v{/yun}" {yun:}if $resume.type==$v{/yun}selected="selected" {yun:}/if{/yun}>{yun:}$userclass_name[$v]{/yun}</option>
											{yun:}/foreach{/yun}
										</select>
									</div>
								</div>
							
							<div class="resume_tip"><span class="none" id="hidtypeid"></span></div>
						</div></div>
                        	<div class="news_expect_list">
							<span class="news_expect_list_span news_expect_list_spanw160">从事行业：</span>
							<div class="news_expect_text_big  ">
								<div class="layui-form-item">
									<div class="layui-input-inline" style="width:330px;">
										<select name="hy" lay-filter="" id="hyid">
											<option value="0" >不限</option>
											{yun:}foreach from=$industry_index key=j item=v{/yun}
												<option value="{yun:}$v{/yun}" {yun:}if $resume.hy==$v{/yun}selected="selected" {yun:}/if{/yun}>{yun:}$industry_name[$v]{/yun}</option>
											{yun:}/foreach{/yun}
										</select>
									</div>
								</div>
								
							
							<div class="resume_tip"><span class="none" id="hidhyid"></span></div>
						</div></div>
						
                      
						
						<div class="news_expect_list">
							<span class="news_expect_list_span news_expect_list_spanw160"><i class="news_expectfont">*</i>求职状态：</span>
							<div class="news_expect_text_big  ">
								<div class="layui-form-item">
									<div class="layui-input-inline" style="width:330px;">
										<select name="jobstatus" lay-filter="" id="statusid">
											{yun:}foreach from=$userdata.user_jobstatus key=j item=v{/yun}
											<option value="{yun:}$v{/yun}" {yun:}if $resume.jobstatus==$v{/yun}selected="selected" {yun:}/if{/yun}>{yun:}$userclass_name[$v]{/yun}</option>
											{yun:}/foreach{/yun}
										</select>
									</div>
								</div>
							
							<div class="resume_tip"><span class="none" id="hidstatusid"></span></div>
						</div></div>
					</div>  </div>
        
					<div class="news_expect_tit"><span class="news_expect_tit_s"><i class="news_expect_tit_s_icon"></i>基本信息</span></div>
					<div class="news_expect_n_box">

						<div class="news_expect_list">
							<span class="news_expect_list_span"><i class="news_expectfont">*</i>姓&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;名：</span>
                            <div class="news_expect_list_rbox">
								<input type="text" value="{yun:}$resume.name{/yun}" {yun:}if $resume.idcard_status==1{/yun}readonly{yun:}/if{/yun} name="uname" id="uname" class="news_expect_text_t1" onBlur="checkonblur('uname');"/>
								
								{yun:}if $resume.idcard_status==1{/yun}
									<a href="index.php?c=passwd" class="news_ok_rz">已实名认证，重新认证？</a>
								{yun:}/if{/yun}
								<div class="resume_tip">	<span class="none" id="hiduname"></span></div>
							</div>
						</div>

						<div class="news_expect_list" style="height:38px;">
							<span class="news_expect_list_span news_expect_list_spanw160"><i class="news_expectfont">*</i>性&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;别：</span>
							<div class="news_expect_list_rbox">
                            <input type="hidden" id="sex" name="sex" value="{yun:}$resume.sex{/yun}" /> 
							{yun:}foreach from=$user_sex key=j item=v{/yun}
								<span class="news_expect_sex_t news_expect_sex {yun:}if $j == $resume.sex{/yun}news_expect_sex_cur{yun:}/if{/yun}" id="{yun:}$j{/yun}sex" onclick="checksex('{yun:}$j{/yun}')"><i class="news_expect_icon_sex news_expect_icon_sex{yun:}$j{/yun}"></i>{yun:}$v{/yun}</span> 
							{yun:}/foreach{/yun}
							<div class="resume_tip"><span class="none" id="hidsex"></span></div>
						</div></div>

						<div class="news_expect_list">
							<span class="news_expect_list_span"><i class="news_expectfont">*</i>出生年月：</span>
							<div class="news_expect_text_big_box ">
								<input name="birthday" id="birthday" type="text" value="{yun:}$resume.birthday{/yun}" class="news_expect_text_time" readonly />
						
							<div class="resume_tip"><span class="none" id="hidbirthday"></span> </div>
						</div>	</div>

						<div class="news_expect_list">
							<span class="news_expect_list_span news_expect_list_spanw160"><i class="news_expectfont">*</i>现居住地：</span><div class="news_expect_list_rbox">
							<input type="text" value="{yun:}$resume.living{/yun}" name="living" class="news_expect_text_t1" id="living" onBlur="checkonblur('living');" />
							<div class="resume_tip"><span class="none" id="hidliving"></span></div>
						</div></div>

						<div class="news_expect_list">
							<span class="news_expect_list_span"><i class="news_expectfont">*</i>最高学历：</span>
							<div class="news_expect_text_big ">
								<div class="layui-form-item">
									<div class="layui-input-inline" style="width:330px;">
										<select name="edu" lay-filter="edu" id="educid">
											<option value="">请选择最高学历</option>
											{yun:}foreach from=$userdata.user_edu key=j item=v{/yun}
												<option value="{yun:}$v{/yun}" {yun:}if $resume.edu==$v{/yun}selected="selected" {yun:}/if{/yun}>{yun:}$userclass_name[$v]{/yun}</option>
											{yun:}/foreach{/yun}
										</select>
									</div>
								</div>
							
							<div class="resume_tip"><span class="none" id="hideducid"></span></div>
						</div></div>

						

						<div class="news_expect_list">
							<span class="news_expect_list_span news_expect_list_spanw160"><i class="news_expectfont">*</i>手机号码：</span> <div class="news_expect_list_rbox">
							{yun:}if $resume.moblie_status==1{/yun}
								<span class="news_phe_ok">{yun:}$resume.telphone{/yun} <a href="index.php?c=passwd" class="news_ok_rz">重新认证</a></span>
								
								<input type="hidden" id="telphone" name="telphone" value="{yun:}$resume.telphone{/yun}"> 
							{yun:}else{/yun}
								<input name="telphone" id="telphone" type="text" value="{yun:}$resume.telphone{/yun}" onkeyup="this.value=this.value.replace(/[^0-9.]/g,'')" class="news_expect_text_t1" onBlur="checkonblur('telphone');" />
								<span id="by_telphone" style="display:none">请正确填写手机号码</span> 
							{yun:}/if{/yun}
							<div class="resume_tip"><span class="none" id="hidtelphone"></span></div>
						</div>
                        </div>
						<div class="news_expect_list">
							<span class="news_expect_list_span"><i class="news_expectfont">*</i>工作经验：</span>
							<div class="news_expect_text_big   news_expect_text_re1">
								<div class="layui-form-item">
									<div class="layui-input-inline" style="width:330px;">
										<select name="exp" lay-filter="exp" id="expid">
											<option value="">请选择工作经验</option>
											{yun:}foreach from=$userdata.user_word key=j item=v{/yun}
												<option value="{yun:}$v{/yun}" {yun:}if $resume.exp==$v{/yun}selected="selected" {yun:}/if{/yun}>{yun:}$userclass_name[$v]{/yun}</option>
											{yun:}/foreach{/yun}
										</select>
									</div>
								</div>
							
							<div class="resume_tip"><span class="none" id="hidexpid"></span></div>
						</div></div>
						<div class="news_expect_list">
							<span class="news_expect_list_span news_expect_list_spanw160">联系邮箱：</span> 
							<div class="news_expect_list_rbox">{yun:}if $resume.email_status==1{/yun}
								<span class="news_email_ok">{yun:}$resume.email{/yun}</span>
								<a href="index.php?c=passwd" class="news_ok_rz">重新认证</a>
								<input type="hidden" id="email" value="{yun:}$resume.email{/yun}"> 
							{yun:}else{/yun}
								<input name="email" id="email" type="text" size="30" value="{yun:}$resume.email{/yun}" class="news_expect_text_t1" onBlur="checkonblur('email');" />
								<span id="by_email" class="errordisplay">邮件格式错误</span> 
							{yun:}/if{/yun}
							<div class="resume_tip"><span class="none" id="hidemail"></span></div>
						</div></div>
					</div>
          
          <div class="news_expect_fotbox">
					<div class="news_expect_nbth">
						{yun:}if $config.resume_create_exp!='1'&&$config.resume_create_edu!='1'&&$config.resume_create_project!='1'{/yun}
						<input type="submit" class="news_expect_list_sub" value="保存" name="submit">
						{yun:}else{/yun}
						<input type="button" class="news_expect_list_sub" value="下一步" name="submit" onclick="preSave()">
						<!--<input type="button" class="news_expect_list_sub" value="下一步" name="submit" onclick="checknext('expect')">-->
						{yun:}/if{/yun}
					</div></div>
				</div>



					{yun:}if $config.resume_create_exp=='1'{/yun}
					<!---工作经历start---->
					<div class="news_expect_content" id="work" style="display:none;">
							<div class="news_expect_tit">
								<span class="news_expect_tit_s"><i class="news_expect_tit_yx_icon"></i>工作经历</span>
								<span id="isexpshow" style="top: -35px;left:200px; position:relative; display:none;">
									<input type="radio" name="iscreateexp" checked="checked" id="iscreateexp1" lay-filter="iscreateexp" value="1" title="有">
									<input type="radio" name="iscreateexp" id="iscreateexp2" lay-filter="iscreateexp" value="2" title="无">
								</span>
							</div>
							<div id="addwork">
								<div class="news_expect_n_box">

									<div class="news_expect_list">
										<span class="news_expect_list_span"><i class="news_expectfont">*</i>公司名称：</span><div class="news_expect_list_rbox">
										<input type="text" value="" name="workname[]" id="workname" class="news_expect_text_t1" onBlur="checkonblur('workname','rand');" placeholder="请填写公司名称"/>
										<span class="news_expect_name"></span>
										<div class="resume_tip"><span class="none" id="hidworkname"></span></div>
									</div></div>

									<div class="news_expect_list news_expect_w1000">
										<span class="news_expect_list_span"><i class="news_expectfont">*</i>担任职位：</span><div class="news_expect_list_rbox">
										<input type="text" value="" name="worktitle[]" id="worktitle" class="news_expect_text_t1" onBlur="checkonblur('worktitle','rand');" placeholder="请填写担任职位"/>
										<span class="news_expect_name"></span>
										<div class="resume_tip"><span class="none" id="hidworktitle"></span></div>
									</div></div>

									<div class="news_expect_list news_expect_listw100">
										<span class="news_expect_list_span"><i class="news_expectfont">*</i>在职时间：</span><div class="news_expect_list_rbox">
										<input name="worksdate[]" id="worksdate" type="text" value="" onfocus="showblurmsg('worksdate',1,'')"  placeholder="请选择入职时间"class="news_expectadd_text" style="width:105px">
										<span class="news_expect_text_xzline">-</span>
										<input name="workedate[]" id="workedate" type="text" value="" onfocus="showblurmsg('workedate',1,'')" class="news_expectadd_text" placeholder="请选择离职时间"style="width:105px">
										<div class="news_expect_listtody">
											<input type="checkbox" value='1' data-random='' id="stopdate" name="stopdate[]" lay-filter="stopdate" title="至今" lay-skin="primary"> 
											<input type="hidden" id="totoday" name="totoday[]" value='0' />
										</div>
										<script>
										    layui.use(['laydate'], function(){var laydate = layui.laydate;monthclick(laydate,'#worksdate');monthclick(laydate,'#workedate');});
										</script>
										<span class="news_expect_name"></span>
										<div class="resume_tip"><span class="none" id="hidworksdate"></span></div>
									</div>
	                                </div>

									<div class="news_expect_textarea">
										<span class="news_expect_list_span">工作内容：</span>
	                                    <div class="news_expect_list_rbox">
										<div class="news_expect_textarea_box">
											<textarea rows="5" cols="50" name="workcontent[]" id="workcontent" class="news_expect_n_boxtextarea " placeholder="请简述一下岗位职责和工作业绩，让用人单位对更多了解你！"></textarea>
										</div>
										<span class="news_expect_name"></span>
										<div class="resume_tip"><span class="none" id="hidworkcontent"></span></div>
									</div></div>
                                     <div class="wsexpect_tip"> 80%的企业通过工作经历来了解您的真实情况，您可添加多个工作经历~
                                     <div class="wsexpect_tip_bth"><a href="javascript:;" onclick="addWork();" class="wsexpect_tip_tj">+ 添加工作经历</a></div></div>
								</div>
							</div>

                           
	                        <div class="news_expect_fotbox">
	                        
								<div class="news_expect_nbth">
									
									{yun:}if $config.resume_create_edu!='1'&&$config.resume_create_project!='1'{/yun}
									<input type="submit" class="news_expect_list_sub" value="保存" name="submit">
									{yun:}else{/yun}
									<input type="button" class="news_expect_list_sub" value="下一步" name="submit" onclick="checknext('work')">
									{yun:}/if{/yun}<input type="button" class="layui-btn layui-btn-primary" value="返回上一步" name="submit" onclick="checkback('expect','work')" style="margin-left:20px">
								</div>
							</div>
							</div>
							<!--end-->
						{yun:}/if{/yun} 

						{yun:}if $config.resume_create_edu=='1'{/yun}
							<!--教育经历start-->
						<div class="news_expect_content" id="edu" style="display:none;">
							<div class="news_expect_tit">
								<span class="news_expect_tit_s"><i class="news_expect_tit_yx_icon"></i>毕业院校</span>
								<span id="isedushow" style="top: -35px;left:200px; position:relative; display:none;"><input type="radio" name="iscreateedu" checked="checked" id="iscreateedu1" lay-filter="iscreateedu" value="1" title="有"><input type="radio" name="iscreateedu" id="iscreateedu2" lay-filter="iscreateedu" value="2" title="无"></span>
							</div>
							<div id="addedu">
								<div class="news_expect_n_box">
									<div class="news_expect_list">
										<span class="news_expect_list_span"><i class="news_expectfont">*</i>学校名称：</span>
		                                <div class="news_expect_list_rbox">
											<input type="text" value="" name="eduname[]" id="eduname" class="news_expect_text_t1" onBlur="checkonblur('eduname','rand');" placeholder="请填写学校名称"/>
											<span class="news_expect_name"></span>
											<div class="resume_tip"><span class="none" id="hideduname"></span></div>
										</div>
	                                </div>

									<div class="news_expect_list news_expect_w1000">
										<span class="news_expect_list_span"><i class="news_expectfont">*</i>在校时间：</span>
		                                <div class="news_expect_list_rbox">
											<input name="edusdate[]" id="edusdate" onfocus="showblurmsg('edusdate',1,'')" type="text" value=""placeholder="请选择入校时间"  class="news_expectadd_text" />
											<span class="news_expect_text_xzline">-</span>
											<input name="eduedate[]" id="eduedate" type="text" onfocus="showblurmsg('eduedate',1,'')" value="" placeholder="请选择毕业时间" class="news_expectadd_text" />
											<span class="news_expect_name"></span>
											<div class="resume_tip resume_tipw160"><span class="none" id="hidedusdate"></span></div>
										</div>
									</div>
									<script>
									    layui.use(['laydate'], function(){var laydate = layui.laydate;monthclick(laydate,'#edusdate');monthclick(laydate,'#eduedate');});
									</script>
									<div class="news_expect_list news_expect_w1000">
										<span class="news_expect_list_span"><i class="news_expectfont">*</i>最高学历：</span>
										<div class="news_expect_text_big">
											<div class="layui-form-item">
												<div class="layui-input-inline" style="width:330px;">
													<select name="education[]" lay-filter="" id="education">
														<option value="">请选择学历</option>
														{yun:}foreach from=$userdata.user_edu key=j item=v{/yun}
														<option value="{yun:}$v{/yun}">{yun:}$userclass_name[$v]{/yun}</option>
														{yun:}/foreach{/yun}
													</select>
												</div>
											</div>
										
											<div class="resume_tip"><span class="none" id="hideducation"></span></div>
										</div>
									</div>
									<div class="news_expect_list news_expect_w1000">
										<span class="news_expect_list_span">所学专业：</span>
		                                <div class="news_expect_list_rbox">
											<input type="text" value="" name="eduspec[]" id="eduspec" class="news_expect_text_t1" onBlur="checkonblur('eduspec','rand');" placeholder="请填写所学专业"/>
											<span class="news_expect_name"></span>
		                                    
											<div class="resume_tip"><span class="none" id="hideduspec"></span></div>
										</div>	
									</div>
									
                                     <div class="wsexpect_tip"> 企业需要了解您的教育经历，请认真填写！您可添加多个教育经历~
                                     <div class="wsexpect_tip_bth"><a href="javascript:;" onclick="addEdu();" class="wsexpect_tip_tj">+ 添加教育经历</a></div></div>
								</div>
							</div>
	                        <div class="news_expect_fotbox">
	                     
								<div class="news_expect_nbth">
									
									{yun:}if $config.resume_create_project!='1'{/yun}
									<input type="submit" class="news_expect_list_sub" value="保存" name="submit">
									{yun:}else{/yun}
									<input type="button" class="news_expect_list_sub" value="下一步" name="submit" onclick="checknext('edu')">
									{yun:}/if{/yun}<input type="button" class="layui-btn layui-btn-primary" value="返回上一步" name="submit" onclick="checkback('{yun:}if $config.resume_create_exp==1{/yun}work{yun:}else{/yun}expect{yun:}/if{/yun}','edu')" style="margin-left:20px">
								</div>
							</div>
						</div>
							<!---end--->
						{yun:}/if{/yun}
								
						{yun:}if $config.resume_create_project=='1'{/yun}
							<!---项目经历start---->
						<div class="news_expect_content" id="project" style="display:none;">
							<div class="news_expect_tit">
								<span class="news_expect_tit_s"><i class="news_expect_tit_yx_icon"></i>项目经历：</span>
								<span id="isproshow" style="top: -35px;left:200px; position:relative; display:none;"><input type="radio" name="iscreatepro" checked="checked" id="iscreatepro1" lay-filter="iscreatepro" value="1" title="有"><input type="radio" name="iscreatepro" id="iscreatepro2" lay-filter="iscreatepro" value="2" title="无"></span>
							</div>
							<div id="addproject">
								<div class="news_expect_n_box">
									<div class="news_expect_list"><span class="news_expect_list_span"><i class="news_expectfont">*</i>项目名称：</span>
		                                <div class="news_expect_list_rbox">
											<input type="text" value="" name="proname[]" id="proname" class="news_expect_text_t1"placeholder="请填写项目名称" onBlur="checkonblur('proname','rand');" />
											<span class="news_expect_name"></span>
											<div class="resume_tip"><span class="none" id="hidproname"></span></div>
										</div>
									</div>
									<div class="news_expect_list news_expect_w1000"><span class="news_expect_list_span"><i class="news_expectfont">*</i>担任职位：</span>
		                                <div class="news_expect_list_rbox">
											<input type="text" value="" name="protitle[]" id="protitle" class="news_expect_text_t1"placeholder="请填写担任职位" onBlur="checkonblur('protitle','rand');" />
											<span class="news_expect_name"></span>
											<div class="resume_tip"><span class="none" id="hidprotitle"></span></div>
										</div>
	                                </div>

									<div class="news_expect_list"><span class="news_expect_list_span"><i class="news_expectfont">*</i>项目时间：</span>
		                                <div class="news_expect_list_rbox">
											<input name="prosdate[]" id="prosdate" onfocus="showblurmsg('prosdate',1,'')" type="text" value="" class="news_expectadd_text"  placeholder="请选择项目开始时间"/>
											<span class="news_expect_text_xzline">-</span>
											<input name="proedate[]" id="proedate" onfocus="showblurmsg('proedate',1,'')" type="text" value="" class="news_expectadd_text"  placeholder="请选择项目结束时间"/>
											<span class="news_expect_name"></span>
											<div class="resume_tip resume_tipw140"><span class="none" id="hidprosdate"></span></div>
										</div>
										<script>
									    layui.use(['laydate'], function(){var laydate = layui.laydate;monthclick(laydate,'#prosdate');monthclick(laydate,'#proedate');});
										</script>
									</div>

									<div class="news_expect_textarea"><span class="news_expect_list_span">项目内容：</span>
										<div class="news_expect_list_rbox">
											<div class="news_expect_textarea_box">
												<textarea rows="5" cols="50" name="procontent[]" id="procontent" placeholder="你在项目中承担了哪些工作？创造了什么业绩？" class="news_expect_n_boxtextarea"></textarea>
											</div>
											<span class="news_expect_name"></span>
											<div class="resume_tip"><span class="none" id="hidprocontent"></span></div>
										</div>
									</div>
									
                                     <div class="wsexpect_tip"> 请描述您主导或参与过项目，以便企业更加了解您的能力！您可添加多个项目经历~
                                     <div class="wsexpect_tip_bth"><a href="javascript:;"onclick="addProject();"class="wsexpect_tip_tj">+ 添加项目经历</a></div></div>
	                            </div>
	                        </div>
	                        <div class="news_expect_fotbox">
	                 
								<div class="news_expect_nbth">
									
									<input type="submit" class="news_expect_list_sub" value="保存" name="submit"><input type="button" class="layui-btn layui-btn-primary" value="返回上一步" name="submit" onclick="checkback('{yun:}if $config.resume_create_edu==1{/yun}edu{yun:}elseif $config.resume_create_exp==1{/yun}work{yun:}else{/yun}expect{yun:}/if{/yun}','project')" style="margin-left:20px">
								</div>
							</div>
							
						</div>
							<!--end-->
						{yun:}/if{/yun}

						<input id="addtype" value="addexpect" type="hidden" />
					</div>
				</div>
			</div>
		</div>
	</div>
 	<input type='hidden' id='resume_edu' value='{yun:}$config.resume_create_edu{/yun}'>
	<input type='hidden' id='resume_exp' value='{yun:}$config.resume_create_exp{/yun}'>
	<input type='hidden' id='resume_pro' value='{yun:}$config.resume_create_project{/yun}'>
	<input type='hidden' id='eid' name="eid" value='0'>
</form>

<script src="{yun:}$config.sy_weburl{/yun}/data/plus/job.cache.js?v={yun:}$config.cachecode{/yun}" type="text/javascript"></script>
<script src="{yun:}$config.sy_weburl{/yun}/data/plus/jobparent.cache.js?v={yun:}$config.cachecode{/yun}" type="text/javascript"></script>
<script src="{yun:}$config.sy_weburl{/yun}/data/plus/city.cache.js?v={yun:}$config.cachecode{/yun}" type="text/javascript"></script>
<script src="{yun:}$config.sy_weburl{/yun}/data/plus/cityparent.cache.js?v={yun:}$config.cachecode{/yun}" type="text/javascript"></script>
<script src="{yun:}$config.sy_weburl{/yun}/js/newclass.public.js?v={yun:}$config.cachecode{/yun}" type="text/javascript"></script> 
<link href="{yun:}$config.sy_weburl{/yun}/js/layui/css/formSelects-v4.css?v={yun:}$config.cachecode{/yun}" rel="stylesheet" type="text/css" />
<script src="{yun:}$config.sy_weburl{/yun}/js/layui/formSelects-v4.js?v={yun:}$config.cachecode{/yun}"></script>
<script>

	layui.use(['layer', 'form', 'laydate'], function() {
		var layer = layui.layer,
			form = layui.form,
			formSelects = layui.formSelects,
			laydate = layui.laydate,
			$ = layui.$;

		'{yun:}if !$resume.birthday{/yun}'
		laydate.render({
			elem: '#birthday',
			max: -5113,
			value: '1990-01-01'
		});
		'{yun:}else{/yun}'
		laydate.render({
			elem: '#birthday',
			max: -5113
		});
		'{yun:}/if{/yun}'

		$("input[name='type']").each(function() {
			$(this).next().click(function() {
				var val = $(this).prev().val();
				if(val) {
					$("#typeid").val(val);
				}

			});

		});
	
		form.on('checkbox(stopdate)', function(data) {
			var random = data.elem.dataset.random;
			if(data.elem.checked) {
 				$('#workedate'+random).attr('disabled', 'disabled');
 				var date = new Date();
 				var y = date.getFullYear();
 				var m = date.getMonth()+1;
 				var time = y+"-"+m;
				$('#workedate'+random).val(time);
				$('#workedate'+random+'un').removeAttr('disabled');
				$('#totoday'+random).val(1);
			} else {
				$('#workedate'+random).val('');
				$('#workedate'+random).removeAttr('disabled');
				$('#workedate'+random+'un').attr('disabled', 'disabled');
				$('#totoday'+random).val(0);
			}
			showblurmsg('worksdate'+random,1,'');
			showblurmsg('workedate'+random,1,'');
			form.render('checkbox');

		});
		form.on('radio', function(data) {

			msg = '';
			showblurmsg('typeid', "1", msg);

		});
		form.on('select', function(data) {

			var selid = data.elem.id;
			checkonblur(selid,'rand');

		});
		form.on('radio(iscreateedu)', function(data) {
			if(data.value==1){
				$('#addedu').show();
			}else{
				$('#addedu').hide();
			}
		});
		form.on('radio(iscreateexp)', function(data) {
			if(data.value==1){
				$('#addwork').show();
			}else{
				$('#addwork').hide();
			}
		});
		form.on('radio(iscreatepro)', function(data) {
			if(data.value==1){
				$('#addproject').show();
			}else{
				$('#addproject').hide();
			}
		});
		formSelects.btns('jobclass_search', []);
		formSelects.btns('cityclass_search', []);
		//实时获取选中值
		formSelects.on('jobclass_search', function(id, vals, val, isAdd, isDisabled){
			var jobvalue = [];
            vals.forEach(function(item,index){
            	jobvalue.push(item.value);
            })
            $('#job_class').val(jobvalue.join(','));
            checkonblur('job_class');
        }, true);
        formSelects.on('cityclass_search', function(id, vals, val, isAdd, isDisabled){
			var cityvalue = [];
			var living	=	$('#living').val();
            vals.forEach(function(item,index){
            	cityvalue.push(item.value);
            	if(index==0 && living==''){
		    		$('#living').val(item.name);
		    		checkonblur('living');
		    	}
            })
            $('#city_class').val(cityvalue.join(','));
            checkonblur('city_class');
        }, true);
        //重设职位类别数据
	    '{yun:}if $resume.job_classid{/yun}'
	    jobSearchReset();
	    '{yun:}/if{/yun}'
	    //重设城市类别数据
	    '{yun:}if $resume.city_classid{/yun}'
	    citySearchReset();
	    '{yun:}/if{/yun}'
	    formSelects.maxTips('jobclass_search', function(id, vals, val, max){
		    layer.msg('最多只能选择5个！', 2, 8);
		});
		formSelects.maxTips('cityclass_search', function(id, vals, val, max){
		    layer.msg('最多只能选择5个！', 2, 8);
		});

	});
	function jobSearchReset(){

		var formSelects = layui.formSelects, 
			jobclassArr= $("#job_class").val()!='' ? $("#job_class").val().split(",") : [],
	        jarr = [];

	    for(var i=0;i<jobclassArr.length;i++){
	    	jarr.push({"name":jn[jobclassArr[i]],"value":jobclassArr[i],"selected":'selected'});
	    }
	    formSelects.data('jobclass_search', 'local', {
	        arr: jarr
	    });
	}
	function citySearchReset(){

		var formSelects = layui.formSelects, 
			cityclassArr= $("#city_class").val()!='' ? $("#city_class").val().split(",") : [],
	        carr = [];
	    var living=$('#living').val();
	    for(var i=0;i<cityclassArr.length;i++){
	    	if(i==0 && living==''){
	    		$('#living').val(cn[cityclassArr[i]]);
	    		checkonblur('living');
	    	}
	    	carr.push({"name":cn[cityclassArr[i]],"value":cityclassArr[i],"selected":'selected'});
	    }
	    formSelects.data('cityclass_search', 'local', {
	        arr: carr
	    });

	}
	var userstyle = '{yun:}$user_style{/yun}';

	function checkback(type,nexttype){
		window.scrollTo(0,0);
		$(".news_expect_content").hide();
		$("#"+type).show();
		$("#"+nexttype+"type").removeAttr('class','fill_add_color');
	}
	
	// 预保存简历信息
	function preSave(){
	    var that = this;
        var name = $.trim($('#name').val());
        var job_class = $.trim($('#job_class').val());
        var city_class = $.trim($('#city_class').val());
        var report = $.trim($('#reportid').val());
        var minsalary = $.trim($('#minsalary').val());
        var maxsalary = $.trim($("#maxsalary").val());
        var typeid = $.trim($('#typeid').val());
        var hy = $.trim($('#hyid').val());
        var jobstatus = $.trim($('#statusid').val());
		var uname = $.trim($('#uname').val());
		var sex = $.trim($('#sex').val());
		var birthday = $.trim($('#birthday').val());
		var living = $.trim($('#living').val());
		var edu = $.trim($('#educid').val());
		var telphone = $.trim($('#telphone').val());
		var exp = $.trim($('#expid').val());
		var email = $.trim($('#email').val());
		var eid = $.trim($('#eid').val());
        if (name == "") {
            parent.layer.msg('请填写期望职位！', 2, 8);
            return false;
        }
        if (job_class == "") {
            parent.layer.msg('请选择工作职能！', 2, 8);
            return false;
        }
        if (city_class == '') {
            parent.layer.msg('请选择期望城市！', 2, 8);
            return false;
        }
        if (report == '') {
            parent.layer.msg('请选择到岗时间！', 2, 8);
            return false;
        }
        if (minsalary == "" || minsalary == "0") {
            parent.layer.msg('请填写期望薪资！', 2, 8);
            return false;
        }
        if (maxsalary && parseInt(maxsalary) <= parseInt(minsalary)) {
            parent.layer.msg('最高薪资必须大于最低薪资！', 2, 8);
            return false;
        }
        if (typeid == "") {
            parent.layer.msg('请选择工作性质！', 2, 8);
            return false;
        }
        if (uname == "") {
            parent.layer.msg('请输入姓名！', 2, 8);
            return false;
        }
        if (birthday == "") {
            parent.layer.msg('请选择出生年月！', 2, 8);
            return false;
        }
        if (living == "") {
            parent.layer.msg('请输入现居住地！', 2, 8);
            return false;
        }
        if (edu == "") {
            parent.layer.msg('请选择最高学历！', 2, 8);
            return false;
        }
        if (telphone == "") {
            parent.layer.msg('请输入手机号码！', 2, 8);
            return false;
        }
        if (exp == "") {
            parent.layer.msg('请选择工作经验！', 2, 8);
            return false;
        }
        if (jobstatus == "") {
            parent.layer.msg('请选择求职状态！', 2, 8);
            return false;
        }
        if (!parseInt(sex)) {
			parent.layer.msg('请选择性别！', 2, 8);
			return false;
		}
        loadlayer();
        $.post("index.php?c=expect&act=presave", {
            name: name,
            job_class: job_class,
            city_class: city_class,
            report: report,
            minsalary: minsalary,
            maxsalary: maxsalary,
            type: typeid,
            hy: hy,
            jobstatus: jobstatus,
            uname: uname,
			sex: sex,
			birthday: birthday,
			living: living,
			edu: edu,
			telphone: telphone,
			exp: exp,
			email: email,
			eid:eid,
            submit: "第一步"
        }, function(data) {
            parent.layer.closeAll('loading');
            if(data){
                var res = JSON.parse(data);
                if(res.code == 200){
                    $('#eid').val(res.eid)
                    that.checknext('expect')
                }else{
                    return parent.layer.msg(res.msg, 2, 8);
                }
            }
        });
	}
	
	function checknext(type){
		var resume_exp = $('#resume_exp').val();//工作经历
		var resume_edu = $('#resume_edu').val();//教育经历
		var resume_pro = $('#resume_pro').val();//项目经历
		var educreate='{yun:}$config.educreate{/yun}';
		var expcreate='{yun:}$config.expcreate{/yun}';

		/* 新增必填项判断Start */
		var isShow	= 0;
		var jobClassCreate='{yun:}$config.sy_resume_job_classid{/yun}';
		var JobClassArray = $("#job_class").val().length > 0 ? $("#job_class").val().split(",") : new Array(0);
		$(ji).each(function (i, data) {
			for (var i1 = 0; i1 < JobClassArray.length; i1++) {
				if (JobClassArray[i1] == data) {
					if (jobClassCreate.indexOf(data) > -1){
						isShow = 1;
					}
				}
			}

			$(jt[data]).each(function (ii, data2) {

				for (var i2 = 0; i2 < JobClassArray.length; i2++) {
					if (JobClassArray[i2] == data2) {
						if (jobClassCreate.indexOf(data2) > -1 || jobClassCreate.indexOf(data) > -1){
							isShow = 1;
						}
					}
				}

				$(jt[data2]).each(function (iii, data3) {

					for (var i3 = 0; i3 < JobClassArray.length; i3++) {
						if (JobClassArray[i3] == data3) {
							if (jobClassCreate.indexOf(data3) > -1 || jobClassCreate.indexOf(data2) > -1 || jobClassCreate.indexOf(data) > -1){
								isShow = 1;
							}
						}
					}
				});
			});
		});
		/* 新增必填项判断End */

		var nexttype;
		var r_id='';
		var result = true;
		
		if(type=='expect'){
			window.scrollTo(0,0);
			if(resume_exp==1){
				nexttype='work';
				var expid = $('#expid').val();
				if(expcreate.indexOf(expid)>-1 || isShow == 1){
					$('#isexpshow').show();
				}else{
					$('#isexpshow').hide();
					$('#addwork').show();
					$("#iscreateexp1").attr("checked", true);
					layui.use([ 'form' ], function() {
						var form = layui.form;
						form.render();
					});
				}
			}else if(resume_edu==1){
				nexttype='edu';
				var educid = $('#educid').val();
				if(educreate.indexOf(educid)>-1 || isShow == 1){
					$('#isedushow').show();
				}else{
					$('#isedushow').hide();
					$('#addedu').show();
					$("#iscreateedu1").attr("checked", true);
					layui.use([ 'form' ], function() {
						var form = layui.form;
						form.render();
					});
				}
			}else if(resume_pro==1){
				nexttype='project';
				var expid = $('#expid').val();
				if(expcreate.indexOf(expid)>-1 || isShow == 1){
					$('#isproshow').show();
				}else{
					$('#isproshow').hide();
					$('#addproject').show();
					$("#iscreatepro1").attr("checked", true);
					layui.use([ 'form' ], function() {
						var form = layui.form;
						form.render();
					});
				}
			}
			var arrayObj = new Array('name', 'hyid', 'job_class', 'maxsalary', 'minsalary', 'city_class', 'typeid', 'reportid', 'statusid', 'uname', 'sex', 'birthday', 'educid', 'expid', 'telphone', 'email', 'living');
			
			for(i = 0; i < arrayObj.length; i++) {
				checkonblur(arrayObj[i]);
			}
			for(i = 0; i < arrayObj.length; i++) {
				if(exitsdate(arrayObj[i]) == false) {
					return false;
				}
			}
			
			$("#"+type).hide();
			$("#"+nexttype).show();
			$("#"+nexttype+"type").attr('class','fill_add_color');
		}else if(type=='work'){
			window.scrollTo(0,0);
			if(resume_edu==1){
				nexttype='edu';
				var educid = $('#educid').val();
				if(educreate.indexOf(educid)>-1 || isShow == 1){
					$('#isedushow').show();
				}else{
					$('#isedushow').hide();
					$('#addedu').show();
					$("#iscreateedu1").attr("checked", true);
					layui.use([ 'form' ], function() {
						var form = layui.form;
						form.render();
					});
				}
			}else if(resume_pro==1){
				nexttype='project';
				var expid = $('#expid').val();
				if(expcreate.indexOf(expid)>-1 || isShow == 1){
					$('#isproshow').show();
				}else{
					$('#isproshow').hide();
					$('#addproject').show();
					$("#iscreatepro1").attr("checked", true);
					layui.use([ 'form' ], function() {
						var form = layui.form;
						form.render();
					});
				}
			}
			if($('input[name=iscreateexp]:checked').val()!='2'){
			var arrayObj = new Array('workname', 'worktitle', 'worksdate', 'workedate');
			
			for(i = 0; i < arrayObj.length; i++) {
				checkonblur(arrayObj[i]);
			}
			
			for(i = 0; i < arrayObj.length; i++) {
				$("[id^='"+arrayObj[i]+"']").each(function(){
					r_id = $(this).attr('id');
					if(exitsdate(r_id) == false){
						result = false;
						return false;
					}
				});
				
			}

			if(result == false){
				return false;
			}
			}

			$("#"+type).hide();
			$("#"+nexttype).show();
			$("#"+nexttype+"type").attr('class','fill_add_color');
		}else if(type=='edu'){
			window.scrollTo(0,0);
			if(resume_pro==1){
				nexttype='project';
				var expid = $('#expid').val();
				if(expcreate.indexOf(expid)>-1 || isShow == 1){
					$('#isproshow').show();
				}else{
					$('#isproshow').hide();
					$('#addproject').show();
					$("#iscreatepro1").attr("checked", true);
					layui.use([ 'form' ], function() {
						var form = layui.form;
						form.render();
					});
				}
			}
			if($('input[name=iscreateedu]:checked').val()!='2'){
			var arrayObj = new Array('eduname', 'edusdate', 'eduedate', 'education');
			for(i = 0; i < arrayObj.length; i++) {
				checkonblur(arrayObj[i]);
			}
			for(i = 0; i < arrayObj.length; i++) {
				$("[id^='"+arrayObj[i]+"']").each(function(){
					r_id = $(this).attr('id');
					if(exitsdate(r_id) == false){
						result = false;
						return false;
					}
				});
				
			}
			if(result == false){
				return false;
			}
			}
			$("#"+type).hide();
			$("#"+nexttype).show();
			$("#"+nexttype+"type").attr('class','fill_add_color');
			
		}else if(type=='project'){
			window.scrollTo(0,0);
			var arrayObj = new Array('proname', 'protitle', 'prosdate', 'proedate');
			for(i = 0; i < arrayObj.length; i++) {
				checkonblur(arrayObj[i]);
			}
			for(i = 0; i < arrayObj.length; i++) {
				$("[id^='"+arrayObj[i]+"']").each(function(){
					r_id = $(this).attr('id');
					if(exitsdate(r_id) == false){
						result = false;
						return false;
					}
				});
				
			}
			if(result == false){
				return false;
			}
			$("#"+type).hide();
			$("#"+nexttype).show();
			$("#"+nexttype+"type").attr('class','fill_add_color');
		}
		
	}
	
	
	function checkexpect() {

		var resume_edu = $('#resume_edu').val();
		var resume_exp = $('#resume_exp').val();
		var resume_pro = $('#resume_pro').val();
		var result = true;
		var r_id = '';
		var arrayObj = new Array();
		var arrayObj = new Array('name', 'hyid', 'job_class', 'maxsalary', 'minsalary', 'city_class', 'typeid', 'reportid', 'statusid', 'uname', 'sex', 'birthday', 'educid', 'expid', 'telphone', 'email', 'living');
		if(resume_exp == '1'&&$('input[name=iscreateexp]:checked').val()!='2') {
			var arrayExp = new Array('workname', 'worktitle', 'worksdate', 'workedate');
			arrayObj = arrayObj.concat(arrayExp);
		}

		if(resume_edu == '1'&&$('input[name=iscreateedu]:checked').val()!='2') {
			var arrayEdu = new Array('eduname', 'edusdate', 'eduedate', 'education');
			arrayObj = arrayObj.concat(arrayEdu);
		}
		if(resume_pro == '1'&&$('input[name=iscreatepro]:checked').val()!='2') {
			var arrayPro = new Array('proname', 'protitle', 'prosdate', 'proedate');
			arrayObj = arrayObj.concat(arrayPro);
		}

		for(i = 0; i < arrayObj.length; i++) {

			checkonblur(arrayObj[i]);
		}

		for(i = 0; i < arrayObj.length; i++) {
			for(i = 0; i < arrayObj.length; i++) {
				$("[id^='"+arrayObj[i]+"']").each(function(){
					r_id = $(this).attr('id');
					if(exitsdate(r_id) == false){
						result = false;
						return false;
					}
				});
			}
			if(result == false){
				return false;
			}
			if(exitsdate(arrayObj[i]) == false) {

				return false;
			}
		}
		var loadi = layer.load('保存中，请稍候...', 0);
	}

	function checkonblur(id,type) {
		var obj = $.trim($("#" + id).val());
		var msg;

		if(id == "name") {
			var r_l = '{yun:}$config.sy_rname_num{/yun}';
			if(obj == "") {
				msg = '请填写期望职位！';
				showblurmsg(id, "0", msg);
			} else if(parseInt(obj.length) > parseInt(r_l) && parseInt(r_l) > 0){
				msg = '最多输入'+r_l+'个文字';
				showblurmsg(id, "0", msg);
			}else{
				msg = '';
				showblurmsg(id, "1", msg);
			}
		}
		if(id == "hyid") {
			if(obj == '') {
				msg = '请选择从事行业！';
				showblurmsg(id, "0", msg);
			} else {
				msg = '';
				showblurmsg(id, "1", msg);
			}
		}
		if(id == "job_class") {
			if(obj == "") {
				msg = '请选择期望职位！';
				showblurmsg(id, "0", msg);
			} else {
				msg = '';
				showblurmsg(id, "1", msg);
			}
		}
		if(id == "maxsalary") {
			var minsalary = parseInt($('#minsalary').val());
			if(parseInt(obj) > 0 && parseInt(obj) < minsalary) {
				msg = '最高薪资必须大于最低薪资！';
				showblurmsg('minsalary', "0", msg);
			} else {
				msg = '';
				showblurmsg('minsalary', "1", msg);
				$("#" + id).attr('date', '1');
			}
		}
		if(id == "minsalary") {
			var maxsalary = parseInt($('#maxsalary').val());
			if(obj == 0 || obj == "" || obj == "最低薪资") {
				msg = '请填写期望薪资！';
				showblurmsg(id, "0", msg);
			} else if(parseInt(obj) > maxsalary && maxsalary>0) {
				msg = '最高薪资必须大于最低薪资！';
				showblurmsg(id, "0", msg);
			} else {
				msg = '';
				showblurmsg(id, "1", msg);
			}
		}
		if(id == "city_class") {
			if(obj == "") {
				msg = '请选择工作地区！';
				showblurmsg(id, "0", msg);
			} else {
				msg = '';
				showblurmsg(id, "1", msg);
			}
		}
		if(id == "typeid") {
			if(obj == "") {
				msg = '请选择工作性质！';
				showblurmsg(id, "0", msg);
			} else {
				msg = '';
				showblurmsg(id, "1", msg);
			}
		}
		if(id == "reportid") {
			if(obj == "") {
				msg = '请选择到岗时间！';
				showblurmsg(id, "0", msg);
			} else {
				msg = '';
				showblurmsg(id, "1", msg);
			}
		}
		if(id == "statusid") {
			if(obj == "") {
				msg = '请选择求职状态！';
				showblurmsg(id, "0", msg);
			} else {
				msg = '';
				showblurmsg(id, "1", msg);
			}
		}
		if(id == "uname") {
			var uname = $('#uname').val();
			if(obj == "") {
				msg = '请输入真实姓名！';
				showblurmsg(id, "0", msg);
			} else {
				var resumename = '{yun:}$config.sy_resumename_num{/yun}';
				console.log(resumename, uname, isChinaName(uname));
				msg = '';
				if(resumename == '1' && !isChinaName(uname)){
					msg = '姓名请输入2-6位汉字';
					showblurmsg(id, "0", msg);
				} else {
					showblurmsg(id, "1", msg);
				}
			}
		}
		if(id == "sex") {
			if(obj == "") {
				msg = '请选择性别！';
				showblurmsg(id, "0", msg);
			} else {
				msg = '';
				showblurmsg(id, "1", msg);
			}
		}
		if(id == "birthday") {
			if(obj == "") {
				msg = '请选择出生年月！';
				showblurmsg(id, "0", msg);
			} else {
				msg = '';
				showblurmsg(id, "1", msg);
			}
		}
		if(id == "educid") {
			if(obj == "") {
				msg = '请选择最高学历！';
				showblurmsg(id, "0", msg);
			} else {
				msg = '';
				showblurmsg(id, "1", msg);
			}
		}
		if(id == "expid") {
			if(obj == "") {
				msg = '请选择工作经验！';
				showblurmsg(id, "0", msg);
			} else {
				msg = '';
				showblurmsg(id, "1", msg);
			}
		}
		if(id == "telphone") {
			if(obj == '') {
				msg = "请输入手机号码！";
				showblurmsg(id, "0", msg);
			} else if(!isjsMobile(obj)) {
				msg = "手机号码格式错误！";
				showblurmsg(id, "0", msg);
			} else {
				$.ajax({
					type: "POST",
					url: weburl + "/member/index.php?c=expect&act=regmoblie",
					data: {
						telphone: obj
					},
					dataType: "text",
					async: false,
					success: function(data) {
						if(data == 0) {
							msg = '';
							showblurmsg(id, "1", msg);
							return true;
							
						} else {
							msg = "号码已存在！";
							showblurmsg(id, "0", msg);
						}
					}
				});
			}
		}
		
		if(id == "email") {
			var myreg = /^([a-zA-Z0-9\-]+[_|\_|\.]?)*[a-zA-Z0-9\-]+@([a-zA-Z0-9\-]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;
			if(obj != "") {

				if(!myreg.test(obj)) {
					msg = "邮箱格式错误！";
					showblurmsg(id, "0", msg);
				} else {
					$.ajax({
						type: "POST",
						url: weburl+"/member/index.php?c=expect&act=regemail",
						data: {
							email: obj
						},
						dataType: "text",
						async: false,
						success: function(data) {
							if(data == 0) {
								msg = '';
								showblurmsg(id, "1", msg);
							} else {
								msg = "邮箱已被使用！";
								showblurmsg(id, "0", msg);
							}
						}
					});

				}
			} else {
				msg = '';
				showblurmsg(id, "1", msg);

			}
		}
		
		if(id == "living") {
			if(obj == "") {
				msg = '请输入现居住地！';
				showblurmsg(id, "0", msg);
			} else {
				msg = '';
				showblurmsg(id, "1", msg);
			}
		}

		if(id=="workname" || id.indexOf("workname") != -1) {
			
			if(type=='rand'){

				if(obj == "") {
					msg = '请填写公司名称！';
					showblurmsg(id, "0", msg);
				} else {
					msg = '';
					showblurmsg(id, "1", msg);
				}
			}else{
				$("[id^='workname']").each(function(){
					obj = $(this).val();
					id = $(this).attr('id');
					if(obj == "") {
						msg = '请填写公司名称！';
						showblurmsg(id, "0", msg);
					} else {
						msg = '';
						showblurmsg(id, "1", msg);
					}
				});
			}
		}
		
		if(id=="worktitle" || id.indexOf("worktitle") != -1) {
			if(type=='rand'){

				if(obj == "") {
					msg = '请填写担任职位！';
					showblurmsg(id, "0", msg);
				} else {
					msg = '';
					showblurmsg(id, "1", msg);
				}
			}else{
				$("[id^='worktitle']").each(function(){
					obj = $(this).val();
					id = $(this).attr('id');
					if(obj == "") {
						msg = '请填写担任职位！';
						showblurmsg(id, "0", msg);
					} else {
						msg = '';
						showblurmsg(id, "1", msg);
					}
				});
			}
			
		}
		
		if(id=="worksdate" || id.indexOf("worksdate") != -1) {
			$("[id^='worksdate']").each(function(){
				obj = $(this).val();
				id = $(this).attr('id');
				eid=id.replace('worksdate','workedate');
				if(obj == "") {
					msg = '请填写工作时间！';
					showblurmsg(id, "0", msg);
				} else {
					var ed = toDate($("#"+eid).val());
					var st = toDate(obj);
					if(st > ed) {
						msg = '离职时间不合理';
						showblurmsg(id, "0", msg);
					} else{
						msg = '';
						showblurmsg(id, "1", msg);
					}
					
				}
			});
			
		}
		
		if(id=="workedate" || id.indexOf("workedate") != -1) {
			$("[id^='workedate']").each(function(){
				obj = $(this).val();
				id = $(this).attr('id');
				wid=id.replace('workedate','worksdate');
				if(obj == "") {
					msg = '请填写离职时间！';
					showblurmsg(wid, "0", msg);
				}
			});
			
		}

		if(id=="eduname" || id.indexOf("eduname") != -1) {
			if(type=='rand'){

				if(obj == "") {
					msg = '请填写学校名称！';
					showblurmsg(id, "0", msg);
				} else {
					msg = '';
					showblurmsg(id, "1", msg);
				}
			}else{
				$("[id^='eduname']").each(function(){
					obj = $(this).val();
					id = $(this).attr('id');
					if(obj == "") {
						msg = '请填写学校名称！';
						showblurmsg(id, "0", msg);
					} else {
						msg = '';
						showblurmsg(id, "1", msg);
					}
				});
			}
			
			
		}
	
		if(id=="edusdate") {
			$("[id^='edusdate']").each(function(){
				obj = $(this).val();
				id = $(this).attr('id');
				if(obj == "") {
					msg = '请填写在校时间！';
					showblurmsg(id, "0", msg);
				} else {
					msg = '';
					showblurmsg(id, "1", msg);
				}
			});
			
		}

		if(id=="eduedate") {
			var sid='';
			$("[id^='eduedate']").each(function(){
				obj = $(this).val();
				id = $(this).attr('id');
				sid=id.replace('eduedate','edusdate');
				if(obj == "") {
					msg = '请填写离校或预计离校时间！';
					showblurmsg(sid, "0", msg);
					showblurmsg(id, "0", msg);
				} else {
					
					var st = toDate($("#"+sid).val());
					var ed = toDate(obj);
					if(st > ed) {
						msg = '离校时间不合理';
						showblurmsg(sid, "0", msg);
						showblurmsg(id, "0", msg);
					} else {
						msg = '';
						showblurmsg(sid, "1", msg);
						showblurmsg(id, "1", msg);
					}
				}
			});
			
		}

		if(id=="education" || id.indexOf("education") != -1) {
			if(type=='rand'){

				if(obj == "") {
					msg = '请选择相关学历！';
					showblurmsg(id, "0", msg);
				} else {
					msg = '';
					showblurmsg(id, "1", msg);
				}
			}else{
				$("[id^='education']").each(function(){
					obj = $(this).val();
					id = $(this).attr('id');
					if(obj == "") {
						msg = '请选择相关学历！';
						showblurmsg(id, "0", msg);
					} else {
						msg = '';
						showblurmsg(id, "1", msg);
					}
				});
			}
			
		}
		
		
		
		if(id=="proname" || id.indexOf("proname") != -1) {
			if(type=='rand'){

				if(obj == "") {
					msg = '请填写项目名称！';
					showblurmsg(id, "0", msg);
				} else {
					msg = '';
					showblurmsg(id, "1", msg);
				}
			}else{
				$("[id^='proname']").each(function(){
					obj = $(this).val();
					id = $(this).attr('id');
					if(obj == "") {
						msg = '请填写项目名称！';
						showblurmsg(id, "0", msg);
					} else {
						msg = '';
						showblurmsg(id, "1", msg);
					}
				});
			}
			
			
		}
		
		if(id=="protitle" || id.indexOf("protitle") != -1) {
			if(type=='rand'){

				if(obj == "") {
					msg = '请填写项目职位！';
					showblurmsg(id, "0", msg);
				} else {
					msg = '';
					showblurmsg(id, "1", msg);
				}
			}else{
				$("[id^='protitle']").each(function(){
					obj = $(this).val();
					id = $(this).attr('id');
					if(obj == "") {
						msg = '请填写项目职位！';
						showblurmsg(id, "0", msg);
					} else {
						msg = '';
						showblurmsg(id, "1", msg);
					}
				});
			}
			
			
		}
		
		if(id=="prosdate") {
			$("[id^='prosdate']").each(function(){
				obj = $(this).val();
				id = $(this).attr('id');
				if(obj == "") {
					msg = '请选择项目时间！';
					showblurmsg(id, "0", msg);
				} else {
					msg = '';
					showblurmsg(id, "1", msg);
				}
			});
			
		}
		
		if(id=="proedate") {
			var sid='';
			$("[id^='proedate']").each(function(){
				obj = $(this).val();
				id = $(this).attr('id');
				sid=id.replace('proedate','prosdate');
				if(obj == "") {
					msg = '请选择项目结束时间！';
					showblurmsg(sid, "0", msg);
					showblurmsg(id, "0", msg);
				} else {
					var st = toDate($('#'+sid).val());
					var ed = toDate(obj);

					if(st > ed) {

						msg = '项目结束时间不合理';
						showblurmsg(sid, "0", msg);
						showblurmsg(id, "0", msg);
					} else {
						msg = '';
						showblurmsg(sid, "1", msg);
						showblurmsg(id, "1", msg);
					}

				}
			});
			
		}
		

	}

	function toDate(str) {
		var sd = str.split("-");
		return new Date(sd[0], sd[1]);
	}

	function showblurmsg(id, type, msg) {
		$("#hid_" + id).show();
		$("#hid" + id).html(msg);
		if(type == "0") {
			$("#hid" + id).attr("class", "");
			$("#" + id).removeClass("resume_tipfalse");
			$("#" + id).attr('date', '0');
			return false;
		} else {
			$("#hid" + id).attr("class", "resume_tipok");
			$("#" + id).addClass("resume_tipfalse");
			$("#" + id).attr('date', '1');
		}
	}

	function exitsdate(id) {
		if(document.getElementById(id)) {
			if($('#' + id).attr('date') != '1') {
				return false;
			} else {
				return true;
			}
		} else {
			return true;
		}
	}

	function checkmoney(obj) {
		obj.value = obj.value.replace(/[^0-9.]/g, '')
		obj.value = obj.value.replace(/[^\d.]/g, ""); //清除“数字”和“.”以外的字符  
		obj.value = obj.value.replace(/\.{2,}/g, "."); //只保留第一个. 清除多余的  
		obj.value = obj.value.replace(".", "$#$").replace(/\./g, "").replace("$#$", ".");
		obj.value = obj.value.replace(/^(\-)*(\d+)\.(\d\d).*$/, '$1$2.$3'); //只能输入两个小数  
		if(obj.value.indexOf(".") < 0 && obj.value != "") { //以上已经过滤，此处控制的是如果没有小数点，首位不能为类似于 01、02的金额 
			obj.value = parseFloat(obj.value);
		}
	}
	
	function checksex(id) {
		$(".news_expect_sex").removeClass('news_expect_sex_cur');
		$("#"+id+'sex').addClass('news_expect_sex_cur');
		$("#sex").val(id);
		checkonblur('sex');
	}
	function expectmessage(frame_id){ 
		if(frame_id==''||frame_id==undefined){
			frame_id='supportiframe';
		}
		var url=$(window.frames[frame_id].document).find("#layer_url").val();
		if(url){
			window.event.returnValue = false;
			window.location.href = url;return false;
		}
	}
	
	
</script>

<iframe id="expectiframe" name="expectiframe" onload="expectmessage('expectiframe');" style="display:none"></iframe>
{yun:}if $isremind == 1{/yun}
{yun:}include file="$temstyle/member/public/remind.htm"{/yun}
{yun:}/if{/yun}
{yun:}include file="$userstyle/footer.htm"{/yun}